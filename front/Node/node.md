### Node.js 정리

## node
- node.js 
    - 자바스크립트를 이용해서 서버를 만들 수 있는 개발 도구
    - Chrome V8 Javascript 엔진으로 빌드된 Javascript 런타임
    - 런타임 : 특정 언어로 만든 프로그램을 실행할 수 있는 환경
    - 자바스크립트 프로그램을 컴퓨터에서 실행할 수 있음 => 자바스크립트 실행기
    - 이벤트 기반 방식으로 동작하므로, 이벤트가 발생하면 이벤트 리스너에 등록해둔 콜백 함수를 호출
    - 이벤트 루프 : 이벤트 발생 시 호출할 콜백 함수들을 관리하고, 호출된 콜백 함수의 실행 순서를 결정하는 역할을 담당함. 노드가 종료될 때까지 이벤트 처리를 위한 작업을 반복하므로 루프라고 부름
    - 백그라운드 : setTimeout 같은 타이머나 이벤트 리스너들이 대기하는 곳임. 자바스크립트가 아닌 다른 언어로 작성된 프로그램이라고 봐도 됨. 여러 작업이 동시에 실행될 수 있음
    - 태스크 큐 : 이벤트 발생 후, 백그라운드에서는 태스크 큐로 타이머나 이벤트 리스너의 콜백함수를 보냄. 정해진 순서대로 콜백들이 줄을 서 있으므로 콜백 큐라고도 부름. 콜백들은 보통 완료된 순서대로 줄을 서 있지만 특정한 경우에는 순서가 바뀌기도 함
    - 논 블로킹(비동기 입출력) : 이전 작업이 완료될 때까지 대기하지 않고 다음 작업을 수행함을 뜻함
    - 프로세스 : 운영체제에서 할당하는 작업의 단위. 노드나 웹 브라우저 같은 프로그램은 개별적인 프로세스. 프로세스 간에는 메모리 등의 자원을 공유하지 않음
    - 스레드 : 프로세스 내에서 실행되는 흐름의 단위. 프로세스는 스레드를 여러 개 생성해 여러 작업을 동시에 처리할 수 있음. 스레드들은 부모 프로세스의 자원을 공유. 같은 주소의 메모리에 접근 가능하므로 데이터를 공유할 수 있음
    - 노드는 프로세스를 하나 생성하고, 그 중에서 직접 제어할 수 있는 스레드는 하나뿐
    - 스레드풀 : 노드가 특정 동작을 수행할 때 스스로 멀티 스레드를 사용
    - 워커 스레드 : 노드에서 멀티 스레드를 사용할 수 있게 되었음. 직접 다수의 스레드를 사용할 수 있음
- 서버  
    - 네트워크를 통해 클라이언트에 정보나 서비스를 제공하는 컴퓨터 또는 프로그램을 말함
    - 클라이언트의 요청에 대해 응답
- 노드를 서버로 사용
    - 특성
        - libuv 라이브러리를 사용하여 I/O 작업을 논 블로킹 방식으로 처리
        - 스레드 하나가 많은 수의 I/O를 혼자서도 감당할 수 있음
        - CPU 부하가 큰 작업에는 적합하지 않음
        - 코드가 CPU를 많이 요구하면 스레드 하나가 혼자서 감당하기 어려움
    - 장점
        - 개수는 많지만 크기는 작은 데이터를 실시간으로 주고받는 데 적합
        - 예) 실시간 채팅 어플리케이션, 주식차트, JSON 데이터를 제공하는 API서버 등
        - 언어로 자바스크립트를 사용
        - 웹 서버가 내장되어 있음
        - 자바스크립트를 사용함
        - JSON 형식과 쉽게 호환됨
    - 단점
        - 멀티 스레드 프로그래밍을 하는 것은 싱글 스레드에 비해 어려움
        - 멀티 스레드 프로그래밍을 하더라도 C, C++, Rust, Go와 같은 언어에 비해 속도가 많이 느림
        - 이미지나 비디오 처리, 혹은 대규모 데이터 처리처럼 CPU를 많이 사용하는 작업을 위한 서버로는 권장되지 않음
        - 생산성은 매우 좋지만, Go 처럼 비동기에 강점을 보이는 언어나 nginx처럼 정적 파일제공, 로드 밸런싱에 특화된 웹 서버에 비해서는 속도가 느림
- 서버 외의 노드
    - 노드 기반으로 돌아가는 대표적인 웹 프레임워크 : 앵귤러, 리액트, 뷰 등
- REPL(Read Eval Print Loop) : 읽고 해석하고 결과물을 반환하고 종료할 때까지 반복

## 내장 모듈
- os
    - 웹 브라우저에 사용되는 자바스크립트는 운영체제의 정보를 가져올 수 없지만, 노드는 os 모듈에 정보가 담겨 있어 정보를 가져올 수 있음
    - const os = require('os');
- path
    - 폴더와 파일의 경로를 쉽게 조작하도록 도와주는 모듈
    - 운영체제별로 경로 구분이 달라서 필요
    - path.sep : 경로의 구분자
    - path.delimiter : 환경 변수의 구분자
    - path.dirname(경로) : 파일이 위치한 폴더 경로를 보여줌
    - path.extname(경로) : 파일의 확장자를 보여줌
    - path.basename(경로, 확장자) : 파일의 이름(확장자 포함)을 표시
    - path.parse(경로) : 파일 경로를 root, dir, base, ext, name으로 분리
    - path.format(객체) : path.parse()한 객체를 파일 경로로 합침
    - path.normalize(경로) : /나 \를 실수로 여러 번 사용했거나 혼용했을 때 정상적인 경로로 변환
    - path.isAbsolute(경로) : 파일의 경로가 절대경로인지 상대경로인지를 true나 false로 알림
    - path.relative(기준경로, 비교경로) : 경로를 두 개 넣으면 첫 번째 경로에서 두 번째 경로로 가는 방법을 알림
    - path.join(경로, ...) : 여러 인수를 넣으면 하나의 경로로 함침
    - path.resolve(경로, ...) : path.join()과 비슷하지만 차이가 있음.
- url
    - 인터넷 주소를 쉽게 조작하도록 도와주는 모듈
    - url.parse(주소) : 주소를 분해함
    - url.format(객체) : 분해되었던 url 객체를 다시 원래 상태로 조립
- querystring
    - WHATWG 방식의 url 대신 기존 노드의 url을 사용할 때, search 부분을 사용하기 쉽게 객체로 만드는 모듈
- crypto
    - 다양한 방식의 암호화를 도와주는 모듈
    - 단방향 암호화
        - 복호화 할 수 없는 암호화 방식
        - createHash(알고리즘) : 사용할 해시 알고리즘을 넣음. 현재는 sha512 정도로 충분
        - update(문자열) : 반환할 문자열을 넣음
        - digest(인코딩) : 인코딩할 알고리즘을 넣음. base64가 결과 문자열이 가장 짧아 애용됨
        - 현재는 주로 pbkdf2나 bcrypt, scrypt라는 알고리즘으로 비밀번호를 암호화 함
    - 양방향 암호화
        - 암호화된 문자열을 복호화 할 수 있으며, 키(열쇠) 라는 것이 사용됨
        - 대칭형 암호화에서 암호를 복호화하려면 암호화할 때 사용한 키와 같은 키를 사용해야 함
- util
    - 각종 편의 기능을 모아둔 모듈
    - deprecated : 새로운 기능이 나와서 기존 기능보다 더 좋을 때, 기존 기능을 deprecated 처리
    - util.deprecate : 함수가 deprecated 처리되었음을 알림
    - util.promisify : 콜백 패턴을 프로미스 패턴으로 바꿈
- worker_threads
    - 노드에서 멀티 스레드 방식으로 작업
- child_process
    - 노드에서 다른 프로그램을 실행하고 싶거나 명령어를 수행하고 싶을 때 사용하는 모듈
    - 다른 언어의 코드를 실행하고 결괏값을 받을 수 있음
    - exec : 셀을 실행해서 명령어를 수행
    - spawn : 새로운 프로세스를 띄우면서 명령어를 실행
- fs
    - 파일 시스템에 접근
- 버퍼 
    - 파일을 읽을 때 메모리에 파일 크기만큼 공간을 마련해두며 파일 데이터를 메모리에 저장한 뒤 사용자가 조작할 수 있도록 하는데, 이 때 메모리에 저장된 데이터
- 스트림 
    - 버퍼의 크기를 작게 만든 후 여러 번으로 나눠 보내는 방식
    - 동영상 같은 큰 파일들을 전송할 떄 사용

## 예외 처리
- 메인 스레드가 에러로 인해 멈추면, 전체 서버도 멈춤
- 에러가 발생할 것 같은 부분을 try/catch문으로 감싸면 됨
- promise도 catch를 넣어서 처리
- 예측이 불가능한 에러 처리
    - uncaughtException 은 최후의 수다으로 사용
    - uncaughtException 이벤트 발생 후 다음 동작이 제대로 동작하는지를 보증하지 않음
    - uncaughtException 에러 내용을 기록하는 정도로만 사용, process.exit()로 프로세스를 종료

## http 모듈
- REST(REpresentational State Transfer)
    - GET : 서버 자원을 가져오고자 할 때 사용, 요청의 본문에 데이터를 넣지 않음, 데이터를 서버로 보내야 하면 쿼리스트링 사용
        - 브라우저에서 캐싱(기억)할 수도 있어서 같은 주소로 요청을 할 때 서버에서 가져오는 것이 아니라 캐시에서 가져올 수 있음
    - POST : 서버에 자원을 새로 등록하고자 할 때 사용, 요청의 본문에 새로 등록할 데이터를 넣어 보냄
    - PUT : 서버의 자원을 요청에 들어 있는 자원으로 치환하고자 할 때 사용, 요청의 본문에 치환할 데이터를 넣어 보냄
    - PATCH : 서버 자원의 일부만 수정하고자 할 때 사용, 요쳥의 본문에 일부 수정할 데이터를 넣어 보냄
    - DELETE : 서버의 자원을 삭제하고자 할 때 사용, 요청의 본문에 데이터를 넣지 않음
    - OPTIONS : 요청을 하기 전에 통신 옵션을 설명하기 위해 사용
- 세션 쿠키 : 세션을 위해 사용하는 쿠키

## 패키지 매니저
- NPM : 노드 패키지 매니저
- package.json : 설치한 패키지의 버전 관리
    - 생성 : npm init
    - 개발용 패키지 설치 : npm install --save-dev(-D) 패키지

## 서버
- 클라이언트 : 다른 곳에 있는 단말에 데이터를 달라고 요청하는 프로그램
- 서버 : 다른 곳에서 요청받은 명령을 처리해 주는 프로그램
- 웹 서버 : 서버 중에서 많이 사용하는 웹 프라우저에서 접속하는 서버, HTTP 프로토콜을 사용
- 프로토콜 : 데이터를 서로 어떤 형태로 주고받을 것인지를 정한 것, 데이터의 형태
- AJAX : 데이터만 가져온 => 매번 웹 문서를 가져오지 않고 화면을 부분적으로 갱신
- localhost : PC 자신을 나타내는 인터넷 주소 

## 프로세스 객체
- process 객체
    - argv : 프로세스를 실행할 때 전달되는 파라미터(매개변수) 정보
    - env : 환경 변수 정보
    - exit() : 프로세스를 끝내는 메소드
    