### Do it! 오라클로 배우는 데이터베이스 입문 정리

## Database, DBMS
- 데이터베이스 : 특정 목적을 위해 여러 사람이 공유하여 사용할 수 있으며, 효율적인 관리와 검색을 위해 구조화한 데이터 집합
- DBMS : 효율적인 데이터 관리 조건을 만족하며 서비스 제공의 효율성을 높이기 위한 데이터베이스 관리 시스템

## 데이터 모델
- 계층형 데이터 모델
    - 나뭇가지 형태의 트리 구조를 활용하여 데이터 관련성을 계층별로 나누어 부모 자식 같은 관계를 정의하고 데이터를 관리
    - 일대다 관계
- 네트워크형 데이터 모델
    - 그래프 구조를 기반으로 함
    - 개체 간 관계를 그래프 구조로 연결하므로 자식 개체가 여러 부모 개체를 가질 수 있음
- 객체 지향형 데이터 모델
    - 객체 지향 프로그래밍에서 사용하는 객체 개념을 기반으로 한 데이터 모델
    - 데이터를 독립된 객체로 구성하고 관리하며 상속, 오버라이드 등 객체 지향 프로그래밍에 사용되는 강력한 기능을 활용할 수 있음
- 관계형 데이터 모델
    - 현대에 가장 많이 사용하는 관계형 데이터베이스의 바탕이 되는 모델
    - 각 데이터의 독립 특성만을 규정하여 데이터 묶음을 나눔
    - 중복이 발생할 수 있는 데이터는 별개의 릴레이션으로 정의
    - 개체(entity)
        - 데이터베이스에서 데이터화하려는 사물, 개념의 정보 단위
        - 관계형 데이터베이스의 테이블 개념과 대응
        - 테이블은 릴레이션으로 표기하기도 함
    - 속성(attribute)
        - 개체를 구성하는 데이터의 가장 작은 논리적 단위
        - 데이터의 종류, 특성, 상태 등을 정의
        - 관계형 데이터베이스의 열 개념과 대응
    - 관계(relationship)
        - 개체와 개체 또는 속성 간의 연관성을 나타내기 위해 사용
        - 관계형 데이터베이스에서는 테이블 간의 관계를 외래키 등으로 구현하여 사용

## 관계형 데이터베이스(RDBMS)
- 관계형 데이터 모델 개념을 바탕으로 데이터를 저장, 관리하는 데이터베이스를 의미
- SQL(Structured Query Language)
    - 데이터를 다루고 관리하는 데 사용하는 데이터베이스 질의 언어
    - DQL(Data Query Language) : RDBMS에 저장한 데이터를 원하는 방식으로 조회하는 명령어
    - DML(Data Manipulation Language) : RDBMS 내 테이블의 데이터를 저장, 수정, 삭제하는 명령어
    - DDL(Data Definition Language) : RDBMS 내 데이터 관리를 위해 테이블을 포함한 여러 객체를 생성, 수정, 삭제하는 명령어
    - TCL(Transaction Control Language) : 트랜잭션 데이터의 영구 저장, 취소 등과 관련된 명령어
    - DCL(Data Control Language) : 데이터 사용 권한과 관련된 명령어

## 관계형 데이터베이스의 구성 요소
- 테이블
    - 데이터를 2차원 표 형태로 저장하고 관리
    - 가로줄을 행(row, 로) : 저장하려는 하나의 개체를 구성하는 여러 값을 가로로 늘어뜨린 형태
    - 세로줄을 열(column, 열) : 데이터를 대표하는 이름과 공통 특성을 정의
- 키
    - 데이터를 구별할 수 있는 유일한 값
    - 기본키(primary key)
        - 한 테이블 내에서 중복되지 않는 값만 가질 수 있는 키
        - 테이블에 저장된 행을 식별할 수 있는 유일한 값
        - 값의 중복이 없어야 함
        - NULL 값을 가질 수 없음
    - 후보키(candidate key)
        - 대체키(alternate key)라고도 부르며 후보키(candidate key)에 속해 있는 키
        - 후보키 중에서 기본키로 지정되지 않은 열
    - 외래키(foreign key)
        - 특정 테이블에 포함되어 있으면서 다른 테이블의 기본키로 지정된 키
    - 복합키(composite key)
        - 여러 열을 조합하여 기본키 역할을 할 수 있게 만든 키를 뜻함
        - 적게는 두세 개, 많게는 열 개가 넘는 열을 조합하기도 함

## 오라클 데이터베이스
- 자료형 : 테이블을 구성하는 열에 지정
    - VARCHAR2(길이) : 4000byte만큼의 가변 길이 문자열 데이터를 저장할 수 있음
    - NUMBER(전체 자리수, 소수점 이하 자릿수)
        - +38자릿수의 숫자를 저장할 수 있음
        - NUMBER(p, s)와 같이 표기할 경우 s자리만큼 소수점 이하 자릿수를 표현하고, 이 소수점 자리를 포함한 전체 p자리만큼 숫자 데이터를 저장
    - DATE : 날짜 형식을 저장하기 위해 사용하는 자료형으로 세기, 연, 월, 일, 시, 분, 초 저장이 가능
    - CHAR(길이) : 4000byte만큼의 고정 길이 문자열 데이터를 저장할 수 있음
    - NVARCHAR2(길이) : 4000byte만큼의 가변 길이 국가별 문자 세트 데이터를 저장할 수 있음
    - BLOB : 최대 크기 4GB의 대용량 이진 데이터를 저장할 수 있음
    - CLOB : 최대 크기 4GB의 대용량 텍스트 데이터를 저장할 수 있음
    - BFILE : 최대 크기 4GB의 대용량 이진 데이터 파일을 저장할 수 있음
- 객체
    - 오라클 데이터베이스 내에서 데이터를 저장하고 관리하기 위한 논리 구조를 가진 구성 요소
    - 테이블(table) : 데이터를 저장하는 장소
    - 인덱스(index) : 테이블의 검색 효율을 높이기 위해 사용
    - 뷰(view) : 하나 또는 여러 개의 선별된 데이터를 논리적으로 연결하여 하나의 테이블처럼 사용하게 해 줌
    - 시퀀스(sequence) : 일련 번호를 생성해 줌
    - 시노님(synonym) : 오라클 객체의 별칭(다른 이름)을 지정함
    - 프로시저(procedure) : 프로그래밍 연산 및 기능 수행이 가능함(반환 값 없음)
    - 함수(function) : 프로그래밍 연산 및 기능 수행이 가능함(반환 값 있음)
    - 패키지(package) : 관련 있는 프로시저와 함수를 보관함
    - 트리거(trigger) : 데이터 관련 작업의 연결 및 방지 관련 기능을 제공함
- PL/SQL
    - 데이터 관리를 위한 별도의 프로그래밍 언어
    - 변수, 조건문, 반복문 등 프로그래밍 언어에서 제공하는 요소를 사용하여 데이터를 관리할 수 있음

## 데이터 조회
- 셀렉션
    - 행 단위로 원하는 데이터를 조회하는 방식
- 프로젝션
    - 열 단위로 원하는 데이터를 조회
- 셀렉션 + 프로젝션 : 특정 테이블에서 조회하려는 행과 열을 모두 선별
- 조인
    - 두 개 이상의 테이블을 양옆에 연결하여 마치 하나의 테이블인 것처럼 데이터를 조회하는 방식
- SELECT 절, FROM 절
    - SELECT [조회할 열1 이름], [열2 이름], ..., [열N 이름] FROM [조회할 테이블 이름];
- DISTINCT : 중복 데이터 삭제
    - SELECT문으로 데이터를 조회한 후 DISTINCT를 사용하려 중복을 제거
- ORDER BY : 원하는 순서로 출력 데이터를 정렬
    - ASC : 오름차순(낮음 -> 높음)
    - DESC : 내림차순(높음 -> 낮음)
    - 정렬시 시간이 걸려서 꼭 필요한 경우가 아니라면 넣지 않는게 좋음
- WHERE
    - SELECT문으로 데이터를 조회할 때 특정 조건을 기준으로 원하는 행을 출력하는데 사용
    - AND, OR 연산자
    - 산술 연산자 : 더하기, 빼기 같은 수치 연산에서 사용
    - 비교 연산사(>, >=, <, <=, =, !=, <>, ^=) : 연산자 앞뒤에 있는 데이터 값을 비교하는데 사용
    - 논리 부정 연산자 
        - NOT : 값이 true인 경우 false 반환, 복잡한 조건식에서 정반대의 최종 결과를 얻고자 할 때 사용
        - IN : 특정 열에 포함된 데이터를 여러 개 조회할 때 활용
        - BETWEEN A AND B : 일정 범위 내의 데이터를 조회할 때 사용
        - LIKE 연산자 와일드 카드 
            - _ : 어떤 값이든 상관없이 한 개의 문자 데이터를 의미
            - % : 길이와 상관없이 한 개의 문자 데이터를 의미
        - IS NULL : Null인 데이터 출력
        - IS NOT NULL : Null이 아닌 데이터 출력
    - 집합 연산자 : 두 개 이상의 SELECT문의 결과 값을 연결할 때 사용
        - UNION : 연결된 SELECT 문의 결과 값을 합집합으로 묶어 줍니다. 결과값의 중복은 제거됩니다.
        - UNION ALL : 연결된 SELECT문의 결과 값을 합집합으로 묶어줍니다. 중복된 결과 값도 제거 없이 모두 출력됩니다.
        - MINUS : 먼저 작성한 SELECT문의 결과 값에서 다음 SELECT문의 결과 값을 차집합 처리합니다. 먼저 작성한 SELECT문의 결과 값 중 다음 SELECT문에 존재하지 않는 데이터만 출력됩니다.
        - INTERSECT : 먼저 작성한 SELECT문과 다음 SELECT문의 결과 값이 같은 데이터만 출력됩니다. 교집합과 같은 의미입니다.

## 오라클 함수
- 내장 함수
    - 문자 함수 : 문자 데이터를 가공
        - UPPER(문자열) : 괄호 안 문자 데이터를 모두 대문자로 변환하여 반환
        - LOWER(문자열) : 괄호 안 문자 데이터를 모두 소문자로 변환하여 반환
        - INITCAP(문자열) : 괄호 안 문자 데이터 중 첫 글자는 대문자로, 나머지 문자를 소문자로 변환 후 반환
        - LENGTH(문자열) : 문자열의 길이를 반환
        - LENGTHB(문자열) : 문자열의 바이트 수를 반환
        - SUBSTR(문자열 데이터, 시작 위치, 추출 길이) : 문자열 데이터의 시작 위치부터 추출 길이만큼 추출
        - SUBSTR(문자열 데이터, 시작 위치) : 문자열 데이터의 시작 위치부터 문자열 데이터 끝까지 추출
        - INSTR([대상 문자열 데이터(필수)], [위치를 찾으려는 부분 문자(필수)], [위치 찾기를 시작할 대상 문자열 데이터 위치(선택, 기본값은 1)], [시작 위치에서 찾으려는 문자가 몇 번째인지 지정(선택, 기본값은 1)]) : 문자열 데이터 안에 특정 문자나 문자열이 어디에 포함되어 있는지를 알고자 할 때 사용
        - REPLACE([문자열 데이터 또는 열 이름(필수)], [찾는 문자(필수)], [대체할 문자(선택)]) : 특정 문자열 데이터에 포함된 문자를 다른 문자로 대체
        - LPAD([문자열 데이터 또는 열이름(필수)], [데이터의 자릿수(필수)], [빈 공간에 채울 문자(선택)]) : 데이터의 빈 공간을 특정문자로 왼쪽에 채움
        - RPAD([문자열 데이터 또는 열이름(필수)], [데이터의 자릿수(필수)], [빈 공간에 채울 문자(선택)]) : 데이터의 빈 공간을 특정문자로 오른쪽에 채움
        - CONCAT(문자열, 문자열) : 두 문자열 데이터를 합침
        - TRIM([삭제 옵션(선택)][삭제할 문자(선택)] FROM [원본 문자열 데이터(필수)])
            - 삭제할 문자가 생략될 경우에 기본적으로 공백을 제거
            - LTRIM([원본 문자열 데이터(필수)], [삭제할 문자 집합(선택)]) : 왼쪽의 지정 문자을 삭제
            - RTRIM([원본 문자열 데이터(필수)], [삭제할 문자 집합(선택)]) : 오른쪽의 지정 문자을 삭제
    - 숫자 함수 : 숫자 데이터를 연산하고 수치를 조정
        - ROUND([숫자(필수)], [반올림 위치(선택)]) : 특정 숫자를 반올림한 결과를 출력, 반올림 위치를 지정하지 않으면 소수점 첫 번째 자리에서 반올림이 수행 
        - TRUNC([숫자(필수)], [버림 위치(선택)]) : 특정 위치에서 숫자를 버림한 결과를 출력, 버림 위치를 지정하지 않을 경우 소수점 첫 번째 자리에서 버림이 수행
        - CEIL([숫자(필수)]) : 입력된 숫자에 가장 가까운 큰 정수를 반환
        - FLOOR([숫자(필수)]) : 입력된 숫자에서 가장 작은 정수를 반환
        - MOD([나눗셈 될 숫자(필수)], [나눌 숫자(필수)]) : 특정 숫자를 나누고 그 나머지를 출력하는 함수
    - 날짜 함수
        - 날짜 데이터 + 숫자 : 날짜 데이터보다 숫자만큼 일수 이후의 날짜
        - 날짜 데이터 - 숫자 : 날짜 데이터보다 숫자만큼 일수 이전의 날짜
        - 날짜 데이터 - 날짜 데이터 : 두 날짜 데이터 간의 일수 차이
        - 날짜 데이터 + 날짜 데이터 : 연산불가, 지원하지 않음
        - SYSDATE : 오라클 데이터베이스 서버가 놓인 os의 현재 날짜와 시간을 보여줌
        - ADD_MONTHS([날짜 데이터(필수)], [더할 개월 수(정수)(필수)]) : 특정 날짜에 지정한 개월 수 이후 날짜 데이터를 반환
        - MONTHS_BETWEEN([날짜 데이터1(필수)], [날짜 데이터2(필수)]) : 두 날짜 데이터 간의 날짜 차이를 개월 수로 계산하여 출력
        - NEXT_DAY([날짜 데이터(필수)], [요일 문자(필수)]) : 특정 날짜를 기준으로 돌아오는 요일의 날짜를 출력
        - LAST_DAY([날짜 데이터(필수)]) : 특정 날짜가 속한 달의 마지막 날짜를 출력
        - ROUND([날짜데이터(필수)], [반올림 기준 포맷]) 
        - TRUNC([날짜데이터(필수)], [버림 기준 포맷])
    - 형 변환 함수 : 자료형을 변환
        - TO_CHAR([날짜데이터(필수)], '[출력되기 원하는 문자 형태(필수)]', 'NLS_DATE_LANGUAGE = language'(선택)) 
            - 숫자 또는 날짜 데이터를 문자 데이터로 변환
            - TO_CHAR(SYSDATE, 'MON', 'NLS_DATE_LANGUAGE = KOREAN')
        - TO_NUMBER('[문자열 데이터(필수)]', '[인식될 숫자형태(필수)]')
            - 문자열을 지정한 형태의 숫자로 인식하여 숫자 데이터로 변환
        - TO_DATE('[문자열 데이터(필수)]', '[인실될 날짜형태(필수)]')
            - 문자열 데이터를 날짜형의 데이터로 변환
    - NULL 처리 함수
        - NVL([NULL인지 여부를 검사할 데이터 또는 열(필수)], [앞의 데이터가 NULL일 경우 반환할 데이터(필수)])
        - 열 또는 데이터를 입력하여 해당 데이터가 NULL이 아닐 경우 데이터를 그대로 반환하고, NULL인 경우 지정한 데이터를 반환
        - NVL2([NULL인지 여부를 검사할 데이터 또는 열(필수)], [앞 데이터가 NULL이 아닐 경우 반환할 데이터 또는 계산식(필수)], [앞 데이터가 NULL일 경우 반환할 데이터 또는 계산식(필수)])
        - 열 또는 데이터를 입력하여 해당 데이터가 NULL이 아닐 떄와 NULL일 때 출력 데이터를 각각 지정
    - 상황에 따라 다른 데이터를 반환하는 함수
        - DECODE : 기준이 되는 데이터를 먼저 지정한 후 해당 데이터 값에 따라 다른 결과 값을 내보냄
        - DECODE([검사 대상이 될 열 또는 데이터, 연산이나 함수의 결과], [조건1], [데이터가 조건1과 일치할 때 반환할 결과], [조건2], [데이터가 조건2와 일치할 때 반환할 결과], ... [조건n], [데이터가 조건n과 일치할 때 반환할 결과],[위 조건들과 일치한 경우가 없을 때 반환할 결과])
        - CASE문 : 각 조건에 사용하는 데이터가 서로 상관없이도 가능
        - CASE [검사 대상이 될 열 또는 데이터, 연산이나 함수의 결과(선택)] WHEN [조건1] THEN [조검 1의 결과 값이 true일때, 반환할 결과]... ELSE [위 조건들과 일치하는 경우가 없을 때 반환할 결과]

## 다중행 함수와 데이터 그룹화
- 다중행 함수 : 여러 행을 바탕으로 하나의 결과 값을 도출해내기 위해 사용하는 함수
    - SUM([DISTINCT, ALL 중 하나를 선택하거나 아무 값도 지정하지 않음(선택)] [합계를 구할 열이나 연산자. 함수를 사용한 데이터(필수)]) : 합계를 구할 데이터를 지정 
    - COUNT([DISTINCT, ALL 중 하나를 선택하거나 아무 값도 지정하지 않음(선택)] [개수를 구할 열이나 연산자, 함수를 사용한 데이터(필수)]) : 결과 행의 개수를 출력 
    - MAX([DISTINCT, ALL 중 하나를 선택하거나 아무 값도 지정하지 않음(선택)] [최댓값을 구할 열이나 연산자, 함수를 사용한 데이터(필수)]) : 결과 행에서 최댓값을 출력
    - MIN([DISTINCT, ALL 중 하나를 선택하거나 아무 값도 지정하지 않음(선택)] [최솟값를 구할 열이나 연산자, 함수를 사용한 데이터(필수)]) : 결과 행에서 최솟값을 출력, 날짜 데이터에도 사용 가능
    - AVG([DISTINCT, ALL 중 하나를 선택하거나 아무 값도 지정하지 않음(선택)] [평균값을 구할 열이나 연산자, 함수를 사용한 데이터(필수)]) : 결과 행의 평균 값을 반환
- GROUP BY : 결과 값을 원하는 열로 묶어 출력
    - GROUP BY (그룹화할 열을 지정(여러 개 지정 가능)) : 특정 열 또는 데이터를 기준으로 데이터를 그룹으로 묶음
    - 다중행 함수를 사용하지 않은 일반 열은 GROUP BY절에 명시하지 않으면 SELECT절에서 사용할 수 없음
    - HAVING : GROUP BY절이 존재할 때만 사용할 수 있고, 그룹화된 결과 값의 번위를 제한하는데 사용
        - HAVING [출력 그룹을 제한하는 조건식] : GROUP BY 절을 사용해 그룹화된 결과 중 출력 그룹을 선별하는 조건식을 지정
- ROLLUP [그룹화 열 지정(여러 개 지정 가능)] : 그룹화 데이터의 합계를 함께 출력하는데 사용(명시한 열에 한하여 결과가 출력), 그룹 함수는 지정할 수 없음 
- CUBE [그룹화 열 지정(여러 개 지정 가능)] : 그룹화 데이터의 합계를 함께 출력하는데 사용(지정한 모든 열에서 가능한 조합의 결과를 모두 출력)
- GROUPING SETS [그룹화 열 지정(여러 개 지정 가능)] : 여러 그룹화 대상 열의 결과 값을 각각 같은 수준으로 출력
- 그룹화 함수 : 데이터 자체의 가공이나 틀벽한 연산 기능을 수행하지는 않지만 그룹화 데이터의 식별이 쉽고 가독성을 높이기 위한 목적으로 사용
    - GROUPING [GROUP BY절에 ROLLUP 또는 CUBE에 명시한 그룹화 할 열 이름] : 현재의 결과가 그룹화 대상 열의 그룹화가 이루어진 상태의 집계인지 여부를 출력
    - GROUPING_ID [그룹화 여부를 확인할 열(여러 개 지정 가능)] : GROUPING 함수처럼 특정 열의 그룹화 여부를 출력할 수 있으며, 검사할 열을 여러 개 지정할 수 있음

## 조인
- 두 개 이상의 테이블을 연결하여 하나의 테이블처럼 출력할 때 사용하는 방식
- 등가 조인
    - 테이블을 연결한 후에 출력 행을 각 테이블의 특정 열에 일치한 데이터를 기준으로 선정하는 방식
    - FROM 테이블1 별칭1, 테이블2 별칭2
- 비등가 조인
    - 조인 조건이 특정 열의 일치 여부를 검사하는 방식 외에 다른 방식도 사용할 수 있음
- 자체 조인
    - 하나의 테이블을 여러 개의 테이블처럼 활용하여 조인하는 방식
- 외부 조인
    - 조인 조건 데이터 중 어느 한쪽이 NULL임에도 결과를 출력할 때 포함시켜야 하는 경우 사용
    - 조인 기준 열의 어느 한쪽이 NULL이어도 강제로 출력하는 방식
    - Left Outer Join
    - Right Outer Join
- NATURAL JOIN : 등가 조인을 대신해 사용할 수 있는 조인 방식으로 조인 대상이 되는 두 테이블에 이름과 자료형이 같은 열을 찾은 후 그 열을 기준으로 등가 조인을 해줌
- JOIN ~ USING : USING 키워드에 조인 기준으로 사용할 열을 명시하여 사용
- JOIN ~ ON : 기존 WHERE절에 있는 조인 조건식을 ON 키워드 옆에 작성
- OUTER JOIN
    - Left Outer Join
    - Right Outer Join
    - Full Outer Join